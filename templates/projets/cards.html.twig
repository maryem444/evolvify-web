{% extends 'base.html.twig' %}

{% block title %}Liste des Projets (Vue Cartes)
{% endblock %}

{% block stylesheets %}
	<style>
		.page-header {
			margin-top: 80px;
			display: flex;
			justify-content: space-between;
			align-items: center;
		}
		.page-title {
			margin: 0;
			font-size: 24px;
			color: #034694; /* Bleu marine */
			font-weight: bold;
		}
		.header-buttons {
			display: flex;
			align-items: center;
			gap: 10px; /* This adds space between the buttons */
		}
		.btn-add-projet {
			background: linear-gradient(to right, #4CAF50, #2196F3);
			color: white;
			border: none;
			padding: 8px 16px;
			border-radius: 4px;
			font-size: 14px;
			font-weight: 500;
			text-transform: uppercase;
			display: inline-flex;
			align-items: center;
			gap: 8px;
			text-decoration: none;
			transition: opacity 0.3s ease;
		}
		.btn-add-projet:hover {
			transform: translateY(-2px);
			box-shadow: 0 6px 8px rgba(0, 0, 0, 0.15);
		}
		.btn-add-projet i {
			margin-right: 5px;
		}

		/* Styles sp√©cifiques pour la vue en cartes */
		.project-cards {
			display: grid;
			grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
			gap: 20px;
			margin-top: 20px;
		}
		.project-card {
			border-radius: 8px;
			box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
			transition: transform 0.3s ease, box-shadow 0.3s ease;
			overflow: hidden;
			background-color: white;
			height: 100%;
			display: flex;
			flex-direction: column;
		}
		.project-card:hover {
			transform: translateY(-5px);
			box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15);
		}
		.project-card-header {
			padding: 15px;
			background-color: rgb(169, 243, 240);
			color: #034694;
			font-weight: bold;
			font-size: 18px; /* Taille augment√©e */
		}
		.project-card-body {
			padding: 15px;
			flex-grow: 1;
		}
		.project-card-footer {
			padding: 15px;
			background-color: #f5f5f5;
			display: flex;
			justify-content: space-between;
			align-items: center;
		}
		.project-status {
			display: inline-block;
			padding: 5px 10px;
			border-radius: 15px;
			font-size: 12px;
			font-weight: 500;
		}
		.project-description {
			margin: 10px 0;
			color: #333; /* Couleur plus fonc√©e */
			height: 70px; /* Hauteur augment√©e */
			overflow: hidden;
			text-overflow: ellipsis;
			display: -webkit-box;
			-webkit-line-clamp: 3;
			-webkit-box-orient: vertical;
			font-weight: bold; /* Texte en gras */
			font-size: 15px; /* Taille augment√©e */
		}
		.project-dates {
			display: flex;
			justify-content: space-between;
			margin-top: 15px;
			font-size: 13px;
			color: #666;
		}
		.project-card-actions {
			display: flex;
			gap: 15px;
		}
		.view-toggle {
			display: flex;
			gap: 10px;
			margin-left: 10px;
		}
		.view-toggle a {
			display: flex;
			align-items: center;
			padding: 6px 12px;
			border-radius: 4px;
			color: #555;
			text-decoration: none;
			background-color: #f0f0f0;
		}
		.view-toggle a.active {
			background-color: #e0e0e0;
			color: #000;
			font-weight: 500;
		}
		.view-toggle a i {
			margin-right: 5px;
		}
	</style>
{% endblock %}

{% block content %}
	<div class="container-fluid">
		<div class="page-header">
			<h1 class="page-title">üóÇÔ∏è Projets</h1>
			<div class="header-buttons">
				<a href="{{ path('export_pdf') }}" class="btn btn-danger">
					<i class="fas fa-file-pdf"></i>
					Extraire PDF
				</a>

				<a href="{{ path('projet_add_card') }}" class="btn-add-projet">
					<i class="fas fa-plus"></i>Ajouter Projet
				</a>
			</div>
		</div>

		<div class="card">
			<div class="card-body">
				<div class="project-cards">
					{% for projet in projets %}
						<div class="project-card">
							<div class="project-card-header">
								{{ projet.name }}
								<span style="float: right; font-size: 12px; background-color: rgba(255,255,255,0.3); padding: 2px 6px; border-radius: 4px;">{{ projet.abbreviation }}</span>
							</div>
							<div class="project-card-body">
								<div class="project-description">
									{{ projet.description }}
								</div>

								<div class="mt-3">
									{% if projet.status == constant('App\\Entity\\StatutProjet::IN_PROGRESS') %}
										<span class="project-status bg-warning text-dark">En cours</span>
									{% else %}
										<span class="project-status bg-success text-white">Termin√©</span>
									{% endif %}
								</div>

								<div class="project-dates">
									<div>
										<i class="fas fa-calendar-alt text-primary"></i>
										D√©but:
										{{ projet.starterAt ? projet.starterAt|date('d/m/Y') : 'Non d√©fini' }}
									</div>
									<div>
										<i class="fas fa-calendar-check text-danger"></i>
										Fin:
										{{ projet.endDate ? projet.endDate|date('d/m/Y') : 'Non d√©fini' }}
									</div>
								</div>
							</div>
							<div class="project-card-footer">
								<div
									class="project-card-actions">
									{# Nouvelle ic√¥ne pour voir les d√©tails #}
									<a href="{{ path('projet_details_card', { 'id': projet.id }) }}" title="Voir les d√©tails">
										<i class="fas fa-eye" style="color: #2196F3;"></i>
									</a>
									<a href="{{ path('projet_edit_card', { 'id': projet.id }) }}" title="Modifier">
										<i class="fas fa-edit" style="color: #4CAF50;"></i>
									</a>
									<form action="{{ path('projet_delete_card', { 'id': projet.id }) }}" method="post" onsubmit="return confirm('√ätes-vous s√ªr de vouloir supprimer ce projet ?');" style="display:inline;">
										<input type="hidden" name="_method" value="DELETE">
										<button type="submit" style="border: none; background: none; padding: 0;">
											<i class="fas fa-trash" title="Supprimer" style="color: #F44336; cursor: pointer;"></i>
										</button>
									</form>
								</div>
							</div>
						</div>
					{% else %}
						<div class="col-12">
							<div class="alert alert-info">
								Aucun projet n'a √©t√© trouv√©.
							</div>
						</div>
					{% endfor %}
				</div>
			</div>
		</div>
	</div>
{% endblock %}
